# Interview Lab 公网访问部署指南

## 🎯 目标
让应用可以在任何地方、任何设备访问（就像 Google 一样）

---

## 方案一：内网穿透（最简单，5分钟搞定）⭐ 推荐

### 什么是内网穿透？
把你的本地服务映射到一个公网地址，任何人都可以通过这个地址访问。

### 使用 ngrok（免费版可用）

#### 1. 安装 ngrok
访问：https://ngrok.com/download
- 下载 macOS 版本
- 解压后放到 `/usr/local/bin` 或任意 PATH 目录
- 或使用 Homebrew：`brew install ngrok`

#### 2. 注册并获取 token
1. 访问 https://dashboard.ngrok.com/signup 注册（免费）
2. 登录后获取你的 authtoken
3. 在终端运行：
   ```bash
   ngrok config add-authtoken 你的token
   ```

#### 3. 启动你的应用
```bash
cd /Users/jackyg/interview-lab
npm run dev
```

#### 4. 在另一个终端启动 ngrok
```bash
ngrok http 5173
```

你会看到类似输出：
```
Forwarding  https://xxxx-xx-xx-xx-xx.ngrok-free.app -> http://localhost:5173
```

**这个 `https://xxxx-xx-xx-xx-xx.ngrok-free.app` 就是公网地址！**

#### 5. 分享给任何人
- 把这个地址发给朋友，他们可以在任何地方访问
- 手机、其他电脑都可以用这个地址

**⚠️ 注意**：
- 免费版每次重启 ngrok，地址会变
- 免费版有连接数限制
- 适合测试和小范围使用

---

## 方案二：部署到云服务器（生产环境）

### 需要什么？
- 一台云服务器（阿里云、腾讯云、AWS、DigitalOcean 等）
- 域名（可选，也可以用 IP）

### 步骤概览

#### 1. 购买云服务器
- 推荐：阿里云、腾讯云（国内访问快）
- 配置：1核2G 起步即可（约 50-100元/月）

#### 2. 在服务器上部署

**A. 安装 Node.js**
```bash
# 在服务器上
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs
```

**B. 上传代码**
```bash
# 在本地打包代码
cd /Users/jackyg/interview-lab
tar -czf interview-lab.tar.gz .

# 上传到服务器（用 scp 或 FTP）
scp interview-lab.tar.gz user@你的服务器IP:/home/user/
```

**C. 在服务器上解压并安装**
```bash
cd /home/user
tar -xzf interview-lab.tar.gz
cd interview-lab
npm run install:all
```

**D. 配置环境变量**
```bash
cd server
nano .env
# 填入 OPENAI_API_KEY 等
```

**E. 使用 PM2 保持运行**
```bash
# 安装 PM2
npm install -g pm2

# 启动服务
cd /home/user/interview-lab
pm2 start npm --name "interview-lab" -- run dev

# 设置开机自启
pm2 startup
pm2 save
```

**F. 配置防火墙**
- 开放 5173（前端）和 3001（后端）端口
- 或使用 Nginx 反向代理（推荐）

#### 3. 访问
- 通过服务器 IP：`http://你的服务器IP:5173`
- 或绑定域名：`http://yourdomain.com`

---

## 方案三：部署到免费平台（Vercel/Netlify）

### 限制
- 这些平台主要支持静态前端
- 后端需要单独部署（如 Railway、Render）
- 需要修改代码结构

### 如果要用这个方案
我可以帮你：
1. 分离前后端
2. 前端部署到 Vercel
3. 后端部署到 Railway（免费）
4. 配置跨域和 API 地址

---

## 🎯 推荐方案对比

| 方案 | 难度 | 成本 | 适用场景 |
|------|------|------|----------|
| **ngrok 内网穿透** | ⭐ 简单 | 免费 | 测试、临时分享 |
| **云服务器** | ⭐⭐⭐ 中等 | 50-100元/月 | 正式使用、长期运行 |
| **免费平台** | ⭐⭐ 中等 | 免费 | 个人项目、学习 |

---

## 💡 我的建议

1. **现在测试**：用 **ngrok**（5分钟搞定）
2. **正式使用**：买云服务器部署（稳定、可控）

---

## 🚀 快速开始（ngrok）

```bash
# 1. 安装 ngrok（如果还没装）
brew install ngrok

# 2. 注册并配置 token
ngrok config add-authtoken 你的token

# 3. 启动你的应用（在一个终端）
cd /Users/jackyg/interview-lab
npm run dev

# 4. 启动 ngrok（在另一个终端）
ngrok http 5173

# 5. 复制显示的 https://xxxx.ngrok-free.app 地址
# 这个地址可以在任何地方访问！
```

---

## ❓ 需要帮助？

- **想用 ngrok**：我可以帮你配置
- **想部署到云服务器**：我可以写详细的部署脚本
- **想用免费平台**：我可以帮你改造代码结构

告诉我你想用哪个方案！
